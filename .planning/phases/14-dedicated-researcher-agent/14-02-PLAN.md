---
phase: 14-dedicated-researcher-agent
plan: 02
type: execute
wave: 2
depends_on: ["14-01"]
files_modified: [commands/gsd/research-phase.md, get-shit-done/workflows/research-phase.md, get-shit-done/templates/research-subagent-prompt.md]
autonomous: true

must_haves:
  truths:
    - "/gsd:research-phase spawns gsd-researcher agent"
    - "Command is <200 lines (thin orchestrator)"
    - "Workflow file has deprecation notice pointing to agent"
  artifacts:
    - path: "commands/gsd/research-phase.md"
      provides: "Thin orchestrator that spawns researcher agent"
      min_lines: 80
      contains: "gsd-researcher"
    - path: "get-shit-done/workflows/research-phase.md"
      provides: "Deprecation notice"
      contains: "DEPRECATED"
  key_links:
    - from: "commands/gsd/research-phase.md"
      to: "agents/gsd-researcher.md"
      via: "Task tool spawn"
      pattern: "subagent_type.*gsd-researcher"
---

<objective>
Refactor /gsd:research-phase to thin orchestrator that spawns gsd-researcher agent.

Purpose: Apply the thin orchestrator pattern from Phase 13 — command handles argument parsing and context gathering, all research expertise lives in the agent. Reduces main context from ~450+ lines to ~150 lines.

Output: Refactored command (~150 lines), deprecated workflow, simplified subagent prompt template.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Files to refactor:
@commands/gsd/research-phase.md
@get-shit-done/workflows/research-phase.md

Pattern reference (Phase 13 thin orchestrator):
@commands/gsd/debug.md
@.planning/phases/13-debug-agent/13-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Refactor /gsd:research-phase to thin orchestrator</name>
  <files>commands/gsd/research-phase.md</files>
  <action>
Rewrite commands/gsd/research-phase.md as thin orchestrator following the debug.md pattern:

**Keep in orchestrator (low context cost, user interaction):**
- Argument parsing (phase number)
- Validation (phase exists in roadmap)
- Checking for existing RESEARCH.md
- Gathering phase context (roadmap description, requirements)
- Spawning the researcher agent with context
- Presenting results to user
- Offering next steps

**Delegate to agent (burns context during research):**
- All research methodology
- Tool strategy (Context7, WebSearch, etc.)
- Source verification
- Output generation

**Structure:**
```markdown
---
name: gsd:research-phase
description: Research how to implement a phase before planning
argument-hint: "[phase]"
allowed-tools:
  - Read
  - Bash
  - Task
---

<objective>
Research how to implement a phase. Spawns gsd-researcher agent with phase context.
</objective>

<process>
1. Parse phase argument
2. Validate phase exists in roadmap
3. Check for existing RESEARCH.md
4. Gather phase context (description, requirements, constraints)
5. Spawn gsd-researcher agent with research question
6. Present results and offer next steps
</process>

<spawn_researcher>
Task(
  prompt="Research implementation approach for phase {phase}...",
  subagent_type="gsd-researcher"
)
</spawn_researcher>
```

Target: ~150 lines (down from ~84 lines command + ~450 lines workflow)
  </action>
  <verify>
```bash
wc -l commands/gsd/research-phase.md
grep -c "gsd-researcher\|Task\|subagent_type" commands/gsd/research-phase.md
```
Expected: <200 lines, 3+ spawning references
  </verify>
  <done>commands/gsd/research-phase.md is thin orchestrator <200 lines, spawns gsd-researcher</done>
</task>

<task type="auto">
  <name>Task 2: Deprecate workflows/research-phase.md</name>
  <files>get-shit-done/workflows/research-phase.md</files>
  <action>
Replace workflows/research-phase.md with deprecation notice following Phase 13 pattern:

```markdown
# Research Phase Workflow

## ⚠️ DEPRECATED

**This workflow has been consolidated into the gsd-researcher agent.**

The research methodology, tool strategy, and verification protocols now live in:
- `agents/gsd-researcher.md`

The `/gsd:research-phase` command spawns the gsd-researcher agent directly.

**Migration:** No action needed — the command handles this automatically.

---

*Deprecated: 2026-01-XX*
*Replaced by: agents/gsd-researcher.md*
```

Keep file (don't delete) for git history traceability.
  </action>
  <verify>
```bash
head -20 get-shit-done/workflows/research-phase.md
```
Should show DEPRECATED notice
  </verify>
  <done>workflows/research-phase.md has deprecation notice pointing to agent</done>
</task>

<task type="auto">
  <name>Task 3: Create research-subagent-prompt.md template</name>
  <files>get-shit-done/templates/research-subagent-prompt.md</files>
  <action>
Create a simple context-passing template for spawning the researcher agent:

```markdown
# Research Subagent Prompt Template

Template for spawning gsd-researcher agent from orchestrators.

## Template

```
<objective>
Research: {research_question}

Mode: {research_mode} (ecosystem | feasibility | implementation | comparison)
</objective>

<context>
Phase: {phase_number} - {phase_name}
Description: {phase_description}

Requirements:
{phase_requirements}

Constraints:
{constraints_from_state}
</context>

<output>
Write research findings to: {output_path}
Use RESEARCH.md template structure for phase research.
</output>
```

**Note:** Research methodology, tool strategy, and verification protocols are baked into the gsd-researcher agent. This template only passes context.
```

Target: ~60 lines (context-only, agent has expertise)
  </action>
  <verify>
```bash
wc -l get-shit-done/templates/research-subagent-prompt.md
```
Expected: <100 lines
  </verify>
  <done>research-subagent-prompt.md template created, context-only (~60 lines)</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] commands/gsd/research-phase.md is <200 lines
- [ ] Command spawns gsd-researcher agent via Task tool
- [ ] workflows/research-phase.md has deprecation notice
- [ ] research-subagent-prompt.md template exists
- [ ] Template is context-only (no methodology duplication)
</verification>

<success_criteria>
- All tasks completed
- Thin orchestrator pattern applied
- Main context reduced from ~530 lines to ~150 lines
- Workflow deprecated with clear redirect
</success_criteria>

<output>
After completion, create `.planning/phases/14-dedicated-researcher-agent/14-02-SUMMARY.md`
</output>
